<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="sleap.nn.data.normalization" href="sleap.nn.data.normalization.html" /><link rel="prev" title="sleap.nn.data.instance_centroids" href="sleap.nn.data.instance_centroids.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>sleap.nn.data.instance_cropping - SLEAP (v1.1.3)</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SLEAP (v1.1.3)</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">SLEAP (v1.1.3)</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/tutorial.html">Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/new-project.html">Creating a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-labeling.html">Initial Labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-training.html">Training and Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html">Prediction-assisted labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html#reviewing-and-fixing-predictions">Reviewing and fixing predictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/proofreading.html">Tracking instances across frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/analysis.html">Export Data For Analysis</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/gui.html">GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/cli.html">Command line interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/skeletons.html">Skeleton design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/choosing-models.html">Choosing a set of models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/merging.html">Importing predictions for labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/proofreading.html">Tracking and proofreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/colab.html">Run training and inference on Colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/custom-training.html">Creating a custom training profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/remote.html">Running SLEAP remotely</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../notebooks/index.html">Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_on_an_example_dataset.html">Training and inference on an example dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_using_Google_Drive.html">Training and inference on your own data using Google Drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Analysis_examples.html">Analysis examples</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../api.html">Developer API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sleap.instance.html">sleap.instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.message.html">sleap.message</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.skeleton.html">sleap.skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.util.html">sleap.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.asyncvideo.html">sleap.io.asyncvideo</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.convert.html">sleap.io.convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.dataset.html">sleap.io.dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.legacy.html">sleap.io.legacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.pathutils.html">sleap.io.pathutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.video.html">sleap.io.video</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.videowriter.html">sleap.io.videowriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.visuals.html">sleap.io.visuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.adaptor.html">sleap.io.format.adaptor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.coco.html">sleap.io.format.coco</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deeplabcut.html">sleap.io.format.deeplabcut</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deepposekit.html">sleap.io.format.deepposekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.dispatch.html">sleap.io.format.dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.filehandle.html">sleap.io.format.filehandle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.genericjson.html">sleap.io.format.genericjson</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.hdf5.html">sleap.io.format.hdf5</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.labels_json.html">sleap.io.format.labels_json</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.leap_matlab.html">sleap.io.format.leap_matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.main.html">sleap.io.format.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.sleap_analysis.html">sleap.io.format.sleap_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.text.html">sleap.io.format.text</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.callbacks.html">sleap.nn.callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.evals.html">sleap.nn.evals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.heads.html">sleap.nn.heads</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.inference.html">sleap.nn.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.losses.html">sleap.nn.losses</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.model.html">sleap.nn.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.monitor.html">sleap.nn.monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.paf_grouping.html">sleap.nn.paf_grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.peak_finding.html">sleap.nn.peak_finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.system.html">sleap.nn.system</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracking.html">sleap.nn.tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.training.html">sleap.nn.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.utils.html">sleap.nn.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.viz.html">sleap.nn.viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.components.html">sleap.nn.tracker.components</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.kalman.html">sleap.nn.tracker.kalman</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.data.html">sleap.nn.config.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.model.html">sleap.nn.config.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.optimization.html">sleap.nn.config.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.outputs.html">sleap.nn.config.outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.training_job.html">sleap.nn.config.training_job</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.utils.html">sleap.nn.config.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.common.html">sleap.nn.architectures.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.encoder_decoder.html">sleap.nn.architectures.encoder_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hourglass.html">sleap.nn.architectures.hourglass</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hrnet.html">sleap.nn.architectures.hrnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.leap.html">sleap.nn.architectures.leap</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.pretrained_encoders.html">sleap.nn.architectures.pretrained_encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.resnet.html">sleap.nn.architectures.resnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.unet.html">sleap.nn.architectures.unet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.upsampling.html">sleap.nn.architectures.upsampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.augmentation.html">sleap.nn.data.augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.confidence_maps.html">sleap.nn.data.confidence_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.dataset_ops.html">sleap.nn.data.dataset_ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.edge_maps.html">sleap.nn.data.edge_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.general.html">sleap.nn.data.general</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.grouping.html">sleap.nn.data.grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.inference.html">sleap.nn.data.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.instance_centroids.html">sleap.nn.data.instance_centroids</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">sleap.nn.data.instance_cropping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.normalization.html">sleap.nn.data.normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.offset_regression.html">sleap.nn.data.offset_regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.pipelines.html">sleap.nn.data.pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.providers.html">sleap.nn.data.providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.resizing.html">sleap.nn.data.resizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.training.html">sleap.nn.data.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.utils.html">sleap.nn.data.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.align.html">sleap.info.align</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.feature_suggestions.html">sleap.info.feature_suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.labels.html">sleap.info.labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.metrics.html">sleap.info.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.summary.html">sleap.info.summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.trackcleaner.html">sleap.info.trackcleaner</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.write_tracking_h5.html">sleap.info.write_tracking_h5</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap-datasets">Sample datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap/releases">Releases</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-sleap.nn.data.instance_cropping">
<span id="sleap-nn-data-instance-cropping"></span><h1>sleap.nn.data.instance_cropping<a class="headerlink" href="#module-sleap.nn.data.instance_cropping" title="Permalink to this headline">¶</a></h1>
<p>Transformers for cropping instances for topdown processing.</p>
<dl class="py class">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">InstanceCropper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">crop_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_full_image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mock_centroid_confidence</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unbatch</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instances_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'instances'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroids_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'centroids'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L214-L439"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper" title="Permalink to this definition">¶</a></dt>
<dd><p>Data transformer to crop and generate individual examples for instances.</p>
<p>This generates datasets that are instance cropped for topdown processing.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.crop_width">
<code class="sig-name descname"><span class="pre">crop_width</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.crop_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Width of the crops in pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.crop_height">
<code class="sig-name descname"><span class="pre">crop_height</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.crop_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Height of the crops in pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.keep_full_image">
<code class="sig-name descname"><span class="pre">keep_full_image</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.keep_full_image" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the output examples will contain the full images
provided as input to the instance cropped. This can be useful for pipelines
that use both full and cropped images, at the cost of increased memory
requirements usage. Setting this to False can substantially improve
performance of large pipelines if the full images are no longer required.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.mock_centroid_confidence">
<code class="sig-name descname"><span class="pre">mock_centroid_confidence</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.mock_centroid_confidence" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, add confidence keys for compatibility with
predicted instance cropping.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.unbatch">
<code class="sig-name descname"><span class="pre">unbatch</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.unbatch" title="Permalink to this definition">¶</a></dt>
<dd><p>If True (the default), split frame-level examples into multiple
instance-level examples. If False, all instance crops will be kept within
the same example. Use this when building pipelines that require knowledge
about all instances within a single example.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.image_key">
<code class="sig-name descname"><span class="pre">image_key</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.image_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the example key where the image is stored. Defaults to
“image”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.instances_key">
<code class="sig-name descname"><span class="pre">instances_key</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.instances_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the example key where the instance points are stored.
Defaults to “instances”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.centroids_key">
<code class="sig-name descname"><span class="pre">centroids_key</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.centroids_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the example key where the instance centroids are stored.
Defaults to “centroids”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.from_config">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="sleap.nn.config.data.html#sleap.nn.config.data.InstanceCroppingConfig" title="sleap.nn.config.data.InstanceCroppingConfig"><span class="pre">sleap.nn.config.data.InstanceCroppingConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#sleap.nn.data.instance_cropping.InstanceCropper" title="sleap.nn.data.instance_cropping.InstanceCropper"><span class="pre">sleap.nn.data.instance_cropping.InstanceCropper</span></a><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L250-L277"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an instance of this class from its configuration options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – An <code class="xref py py-obj docutils literal notranslate"><span class="pre">InstanceCroppingConfig</span></code> instance with the desired parameters.</p></li>
<li><p><strong>crop_size</strong> – Integer specifying the crop height and width. This is only
required and will only be used if the <code class="xref py py-obj docutils literal notranslate"><span class="pre">config.crop_size</span></code> attribute does
not specify an explicit integer crop size (e.g., it is set to None).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of this class.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the <code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_size</span></code> is not specified in either the config
    attribute or function arguments.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.instance_cropping.InstanceCropper.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_ds</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L303-L439"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.InstanceCropper.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset that contains instance cropped data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – <p>A dataset with examples containing the following keys:
“image”: The full image in a tensor of shape (height, width, channels).
“instances”: Instance points in a tf.float32 tensor of shape</p>
<blockquote>
<div><p>(n_instances, n_nodes, 2).</p>
</div></blockquote>
<dl class="simple">
<dt>”centroids”: The computed centroid for each instance in a tf.float32</dt><dd><p>tensor of shape (n_instances, 2).</p>
</dd>
</dl>
<p>Any additional keys present will be replicated in each output.</p>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing instance cropped data. Each
instance will generate an example, so the total number of elements may
change relative to the input dataset.</p>
<dl class="simple">
<dt>Each element in the output dataset will have the following keys:</dt><dd><dl class="simple">
<dt>”instance_image”: A cropped image of the same dtype as the input image</dt><dd><p>but with shape (crop_width, crop_height, channels) and will be
centered on an instance.</p>
</dd>
<dt>”bbox”: The bounding box in absolute image coordinates in the format</dt><dd><p>(y1, x1, y2, x2) that resulted in the cropped image in
“instance_image”. This will be a tf.float32 tensor of shape (4,).</p>
</dd>
<dt>”center_instance”: The points of the centered instance in image</dt><dd><p>coordinates in the “instance_image”. This will be a tf.float32
tensor of shape (n_nodes, 2). The absolute image coordinates can be
recovered by adding (x1, y1) from the “bbox” key.</p>
</dd>
<dt>”center_instance_ind”: Scalar tf.int32 index of the centered instance</dt><dd><p>relative to all the instances in the frame. This can be used to
index into additional keys that may contain data from all instances.</p>
</dd>
<dt>”all_instances”: The points of all instances in the frame in image</dt><dd><p>coordinates in the “instance_image”. This will be a tf.float32
tensor of shape (n_instances, n_nodes, 2). This is useful for multi-
stage models that first predict all nodes and subsequently refine it
to just the centered instance. The “center_instance_ind”-th row of
this tensor is equal to “center_instance”.</p>
</dd>
<dt>”centroid”: The centroid coordinate that was used to generate this crop,</dt><dd><p>specified as a tf.float32 tensor of shape (2,) in absolute image
coordinates.</p>
</dd>
<dt>”full_image_height”: The height of the full image from which the crop</dt><dd><p>was generated, specified as a scalar tf.int32 tensor.</p>
</dd>
<dt>”full_image_width”: The width of the full image from which the crop was</dt><dd><p>generated, specified as a scalar tf.int32 tensor.</p>
</dd>
</dl>
</dd>
</dl>
<p>If <a class="reference internal" href="#sleap.nn.data.instance_cropping.InstanceCropper.keep_full_image" title="sleap.nn.data.instance_cropping.InstanceCropper.keep_full_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keep_full_image</span></code></a> is True, examples will also have an “image” key
containing the same image as the input.</p>
<p>if <a class="reference internal" href="#sleap.nn.data.instance_cropping.InstanceCropper.mock_centroid_confidence" title="sleap.nn.data.instance_cropping.InstanceCropper.mock_centroid_confidence"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mock_centroid_confidence</span></code></a> is True, examples will also have a
“centroid_confidence” key with all ones. This is useful for evaluating
models that use crops independently from centroid inference.</p>
<p>Additional keys will be replicated in each example under the same name.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.instance_cropping.crop_bboxes">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">crop_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L158-L210"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.crop_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop bounding boxes from an image.</p>
<p>This method serves as a convenience method for specifying the arguments of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.image.crop_and_resize</span></code>, becoming especially useful in the case of multiple
bounding boxes with a single image and no resizing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – Tensor of shape (height, width, channels) of a single image.</p></li>
<li><p><strong>bboxes</strong> – Tensor of shape (n_bboxes, 4) and dtype tf.float32, where the last axis
corresponds to (y1, x1, y2, x2) coordinates of the bounding boxes. This can
be generated from centroids using <a class="reference internal" href="#sleap.nn.data.instance_cropping.make_centered_bboxes" title="sleap.nn.data.instance_cropping.make_centered_bboxes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_centered_bboxes</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tensor of shape (n_bboxes, crop_height, crop_width, channels) of the same
dtype as the input image. The crop size is inferred from the bounding box
coordinates.</p>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This function expects bounding boxes with coordinates at the centers of the
pixels in the box limits. Technically, the box will span (x1 - 0.5, x2 + 0.5)
and (y1 - 0.5, y2 + 0.5).</p>
<p>For example, a 3x3 patch centered at (1, 1) would be specified by
(y1, x1, y2, x2) = (0, 0, 2, 2). This would be exactly equivalent to indexing
the image with <code class="xref py py-obj docutils literal notranslate"><span class="pre">image[0:3,</span> <span class="pre">0:3]</span></code>.</p>
</div>
<p>See also: <a class="reference internal" href="#sleap.nn.data.instance_cropping.make_centered_bboxes" title="sleap.nn.data.instance_cropping.make_centered_bboxes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_centered_bboxes</span></code></a></p>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.instance_cropping.find_instance_crop_size">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">find_instance_crop_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="sleap.io.dataset.html#sleap.io.dataset.Labels" title="sleap.io.dataset.Labels"><span class="pre">sleap.io.dataset.Labels</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_stride</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_scaling</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span> → <span class="pre">int</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L11-L44"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.find_instance_crop_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the size of the largest instance bounding box from labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> – A <code class="xref py py-obj docutils literal notranslate"><span class="pre">sleap.Labels</span></code> containing user-labeled instances.</p></li>
<li><p><strong>padding</strong> – Integer number of pixels to add to the bounds as margin padding.</p></li>
<li><p><strong>maximum_stride</strong> – Ensure that the returned crop size is divisible by this value.
Useful for ensuring that the crop size will not be truncated in a given
architecture.</p></li>
<li><p><strong>input_scaling</strong> – Float factor indicating the scale of the input images if any
scaling will be done before cropping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>An integer crop size denoting the length of the side of the bounding boxes that
will contain the instances when cropped.</p>
<p>This accounts for stride, padding and scaling when ensuring divisibility.</p>
</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.instance_cropping.make_centered_bboxes">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">make_centered_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">centroids</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L113-L155"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.make_centered_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate bounding boxes centered on a set of centroid coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>centroids</strong> – A tensor of shape (n_centroids, 2) and dtype tf.float32, where the
last axis corresponds to the (x, y) coordinates of each centroid.</p></li>
<li><p><strong>box_height</strong> – Scalar integer indicating the height of the bounding boxes.</p></li>
<li><p><strong>box_width</strong> – Scalar integer indicating the width of the bounding boxes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tensor of shape (n_centroids, 4) and dtype tf.float32, where the last axis
corresponds to (y1, x1, y2, x2) coordinates of the bounding boxes in absolute
image coordinates.</p>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The bounding box coordinates are calculated such that the centroid coordinates
map onto the center of the pixel. For example:</p>
<p>For a single row image of shape (1, 4) with values: <code class="xref py py-obj docutils literal notranslate"><span class="pre">[[a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">d]]</span></code>, the x
coordinates can be visualized in the diagram below:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div></div></blockquote>
<div class="line-block">
<div class="line">a  |  b  |  c  |  d  |</div>
<div class="line">|  |  |  |  |  |  |  |</div>
</div>
</div></blockquote>
<dl class="simple">
<dt>-0.5 | 0.5 | 1.5 | 2.5 | 3.5</dt><dd><p>0     1     2     3</p>
</dd>
</dl>
</div></blockquote>
<p>To get a (1, 3) patch centered at c, the centroid would be at (x, y) = (2, 0)
with box height of 1 and box width of 3, to yield <code class="xref py py-obj docutils literal notranslate"><span class="pre">[[b,</span> <span class="pre">c,</span> <span class="pre">d]]</span></code>.</p>
<p>For even sized bounding boxes, e.g., to get the center 2 elements, the centroid
would be at (x, y) = (1.5, 0) with box width of 2, to yield <code class="xref py py-obj docutils literal notranslate"><span class="pre">[[b,</span> <span class="pre">c]]</span></code>.</p>
</div>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.instance_cropping.normalize_bboxes">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">normalize_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L47-L79"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.normalize_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize bounding box coordinates to the range [0, 1].</p>
<p>This is useful for transforming points for TensorFlow operations that require
normalized image coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bboxes</strong> – Tensor of shape (n_bboxes, 4) and dtype tf.float32, where the last axis
corresponds to (y1, x1, y2, x2) coordinates of the bounding boxes.</p></li>
<li><p><strong>image_height</strong> – Scalar integer indicating the height of the image.</p></li>
<li><p><strong>image_width</strong> – Scalar integer indicating the width of the image.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Tensor of the normalized points of the same shape as <code class="xref py py-obj docutils literal notranslate"><span class="pre">bboxes</span></code>.</p>
<p>The normalization applied to each point is <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">(image_width</span> <span class="pre">-</span> <span class="pre">1)</span></code> and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">y</span> <span class="pre">/</span> <span class="pre">(image_width</span> <span class="pre">-</span> <span class="pre">1)</span></code>.</p>
</p>
</dd>
</dl>
<p>See also: unnormalize_bboxes</p>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.instance_cropping.unnormalize_bboxes">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.instance_cropping.</span></code><code class="sig-name descname"><span class="pre">unnormalize_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalized_bboxes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/instance_cropping.py#L82-L110"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.instance_cropping.unnormalize_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert bounding boxes coordinates in the range [0, 1] to absolute coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalized_bboxes</strong> – Tensor of shape (n_bboxes, 4) and dtype tf.float32, where the
last axis corresponds to (y1, x1, y2, x2) normalized coordinates of the
bounding boxes in the range [0, 1].</p></li>
<li><p><strong>image_height</strong> – Scalar integer indicating the height of the image.</p></li>
<li><p><strong>image_width</strong> – Scalar integer indicating the width of the image.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tensor of the same shape as <code class="xref py py-obj docutils literal notranslate"><span class="pre">bboxes</span></code> mapped back to absolute image coordinates
by multiplying (x, y) coordinates by <code class="xref py py-obj docutils literal notranslate"><span class="pre">(image_width</span> <span class="pre">-</span> <span class="pre">1,</span> <span class="pre">image_height</span> <span class="pre">-</span> <span class="pre">1)</span></code>.</p>
</dd>
</dl>
<p>See also: normalize_bboxes</p>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sleap.nn.data.normalization.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">sleap.nn.data.normalization</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sleap.nn.data.instance_centroids.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">sleap.nn.data.instance_centroids</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2019–2021, Murthy Lab @ Princeton University
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/api/sleap.nn.data.instance_cropping.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>