<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="sleap.nn.data.edge_maps" href="sleap.nn.data.edge_maps.html" /><link rel="prev" title="sleap.nn.data.confidence_maps" href="sleap.nn.data.confidence_maps.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>sleap.nn.data.dataset_ops - SLEAP (v1.1.3)</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SLEAP (v1.1.3)</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">SLEAP (v1.1.3)</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/tutorial.html">Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/new-project.html">Creating a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-labeling.html">Initial Labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-training.html">Training and Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html">Prediction-assisted labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html#reviewing-and-fixing-predictions">Reviewing and fixing predictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/proofreading.html">Tracking instances across frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/analysis.html">Export Data For Analysis</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/gui.html">GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/cli.html">Command line interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/skeletons.html">Skeleton design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/choosing-models.html">Choosing a set of models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/merging.html">Importing predictions for labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/proofreading.html">Tracking and proofreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/colab.html">Run training and inference on Colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/custom-training.html">Creating a custom training profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/remote.html">Running SLEAP remotely</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../notebooks/index.html">Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_on_an_example_dataset.html">Training and inference on an example dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_using_Google_Drive.html">Training and inference on your own data using Google Drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Analysis_examples.html">Analysis examples</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../api.html">Developer API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sleap.instance.html">sleap.instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.message.html">sleap.message</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.skeleton.html">sleap.skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.util.html">sleap.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.asyncvideo.html">sleap.io.asyncvideo</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.convert.html">sleap.io.convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.dataset.html">sleap.io.dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.legacy.html">sleap.io.legacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.pathutils.html">sleap.io.pathutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.video.html">sleap.io.video</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.videowriter.html">sleap.io.videowriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.visuals.html">sleap.io.visuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.adaptor.html">sleap.io.format.adaptor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.coco.html">sleap.io.format.coco</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deeplabcut.html">sleap.io.format.deeplabcut</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deepposekit.html">sleap.io.format.deepposekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.dispatch.html">sleap.io.format.dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.filehandle.html">sleap.io.format.filehandle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.genericjson.html">sleap.io.format.genericjson</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.hdf5.html">sleap.io.format.hdf5</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.labels_json.html">sleap.io.format.labels_json</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.leap_matlab.html">sleap.io.format.leap_matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.main.html">sleap.io.format.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.sleap_analysis.html">sleap.io.format.sleap_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.text.html">sleap.io.format.text</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.callbacks.html">sleap.nn.callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.evals.html">sleap.nn.evals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.heads.html">sleap.nn.heads</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.inference.html">sleap.nn.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.losses.html">sleap.nn.losses</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.model.html">sleap.nn.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.monitor.html">sleap.nn.monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.paf_grouping.html">sleap.nn.paf_grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.peak_finding.html">sleap.nn.peak_finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.system.html">sleap.nn.system</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracking.html">sleap.nn.tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.training.html">sleap.nn.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.utils.html">sleap.nn.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.viz.html">sleap.nn.viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.components.html">sleap.nn.tracker.components</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.kalman.html">sleap.nn.tracker.kalman</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.data.html">sleap.nn.config.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.model.html">sleap.nn.config.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.optimization.html">sleap.nn.config.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.outputs.html">sleap.nn.config.outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.training_job.html">sleap.nn.config.training_job</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.utils.html">sleap.nn.config.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.common.html">sleap.nn.architectures.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.encoder_decoder.html">sleap.nn.architectures.encoder_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hourglass.html">sleap.nn.architectures.hourglass</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hrnet.html">sleap.nn.architectures.hrnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.leap.html">sleap.nn.architectures.leap</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.pretrained_encoders.html">sleap.nn.architectures.pretrained_encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.resnet.html">sleap.nn.architectures.resnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.unet.html">sleap.nn.architectures.unet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.upsampling.html">sleap.nn.architectures.upsampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.augmentation.html">sleap.nn.data.augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.confidence_maps.html">sleap.nn.data.confidence_maps</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">sleap.nn.data.dataset_ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.edge_maps.html">sleap.nn.data.edge_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.general.html">sleap.nn.data.general</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.grouping.html">sleap.nn.data.grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.inference.html">sleap.nn.data.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.instance_centroids.html">sleap.nn.data.instance_centroids</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.instance_cropping.html">sleap.nn.data.instance_cropping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.normalization.html">sleap.nn.data.normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.offset_regression.html">sleap.nn.data.offset_regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.pipelines.html">sleap.nn.data.pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.providers.html">sleap.nn.data.providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.resizing.html">sleap.nn.data.resizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.training.html">sleap.nn.data.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.utils.html">sleap.nn.data.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.align.html">sleap.info.align</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.feature_suggestions.html">sleap.info.feature_suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.labels.html">sleap.info.labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.metrics.html">sleap.info.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.summary.html">sleap.info.summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.trackcleaner.html">sleap.info.trackcleaner</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.write_tracking_h5.html">sleap.info.write_tracking_h5</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap-datasets">Sample datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap/releases">Releases</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-sleap.nn.data.dataset_ops">
<span id="sleap-nn-data-dataset-ops"></span><h1>sleap.nn.data.dataset_ops<a class="headerlink" href="#module-sleap.nn.data.dataset_ops" title="Permalink to this headline">¶</a></h1>
<p>Transformers for dataset (multi-example) operations, e.g., shuffling and batching.</p>
<p>These are mostly wrappers for standard tf.data.Dataset ops.</p>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Batcher">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Batcher</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_remainder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unrag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L76-L158"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Batching transformer for use in pipelines.</p>
<p>This class enables variable-length example keys to be batched by converting them to
ragged tensors prior to concatenation, then converting them back to dense tensors.</p>
<p>See the notes in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Shuffling</span></code> and <a class="reference internal" href="#sleap.nn.data.dataset_ops.Repeater" title="sleap.nn.data.dataset_ops.Repeater"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Repeater</span></code></a> transformers if training. If using
in inference, this transformer will be used on its own without dropping remainders.</p>
<dl class="simple">
<dt>The ideal (training) pipeline follows the order:</dt><dd><p>shuffle -&gt; batch -&gt; repeat</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Batcher.batch_size">
<code class="sig-name descname"><span class="pre">batch_size</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.batch_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of elements within a batch. Every key will be stacked within
their first axis (with expansion) such that it has <a class="reference internal" href="#sleap.nn.data.dataset_ops.Batcher.batch_size" title="sleap.nn.data.dataset_ops.Batcher.batch_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_size</span></code></a> length.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Batcher.drop_remainder">
<code class="sig-name descname"><span class="pre">drop_remainder</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.drop_remainder" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, final elements with fewer than <a class="reference internal" href="#sleap.nn.data.dataset_ops.Batcher.batch_size" title="sleap.nn.data.dataset_ops.Batcher.batch_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_size</span></code></a> examples
will be dropped once the end of the input dataset iteration is reached. This
should be True for training and False for inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Batcher.unrag">
<code class="sig-name descname"><span class="pre">unrag</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.unrag" title="Permalink to this definition">¶</a></dt>
<dd><p>If False, any tensors that were of variable length will be left as
<a href="#id1"><span class="problematic" id="id2">`</span></a>tf.RaggedTensor`s. If True, the tensors will be converted to full tensors
with NaN padding. Leaving tensors as ragged is useful when downstream ops
will continue to use them in variable length form.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Batcher.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Batcher.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Batcher.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L114-L158"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Batcher.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with batched elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any dataset that produces dictionaries keyed by strings and values
with any rank tensors.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same keys, but with each
tensor promoted to 1 rank higher (except for scalars with rank 0 will be
promoted to rank 2).</p>
<p>The keys of each element will contain <a class="reference internal" href="#sleap.nn.data.dataset_ops.Batcher.batch_size" title="sleap.nn.data.dataset_ops.Batcher.batch_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_size</span></code></a> individual elements
stacked along the axis 0, such that length (<code class="xref py py-obj docutils literal notranslate"><span class="pre">shape[0]</span></code>) is equal to
<a class="reference internal" href="#sleap.nn.data.dataset_ops.Batcher.batch_size" title="sleap.nn.data.dataset_ops.Batcher.batch_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_size</span></code></a>.</p>
<p>Any keys that had variable length elements within the batch will be padded
with NaNs to the size of the largest element’s length for that key.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.LambdaFilter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">LambdaFilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_fn</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">tensorflow.python.framework.ops.Tensor</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L324-L362"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.LambdaFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Transformer for filtering examples out of a dataset.</p>
<p>This class is useful for eliminating examples that fail to meet some criteria, e.g.,
when no peaks are found.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.LambdaFilter.filter_fn">
<code class="sig-name descname"><span class="pre">filter_fn</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.LambdaFilter.filter_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Callable that takes an example dictionary as input and returns True
if the the element should be kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Callable[Dict[str, tensorflow.python.framework.ops.Tensor], bool]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.LambdaFilter.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.LambdaFilter.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.LambdaFilter.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.LambdaFilter.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.LambdaFilter.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L347-L362"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.LambdaFilter.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with filtering applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any dataset that produces dictionaries keyed by strings and values
with any rank tensors.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same keys, but with
potentially fewer elements.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Prefetcher">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Prefetcher</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L232-L272"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefetching transformer for use in pipelines.</p>
<p>Prefetches elements from the input dataset to minimize the processing bottleneck
as elements are requested since prefetching can occur in parallel.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Prefetcher.prefetch">
<code class="sig-name descname"><span class="pre">prefetch</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher.prefetch" title="Permalink to this definition">¶</a></dt>
<dd><p>If False, returns the input dataset unmodified.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Prefetcher.buffer_size">
<code class="sig-name descname"><span class="pre">buffer_size</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher.buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep <a class="reference internal" href="#sleap.nn.data.dataset_ops.Prefetcher.buffer_size" title="sleap.nn.data.dataset_ops.Prefetcher.buffer_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">buffer_size</span></code></a> elements loaded in the buffer. If set to -1
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.experimental.AUTOTUNE</span></code>), this value will be optimized
automatically to decrease latency.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Prefetcher.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Prefetcher.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Prefetcher.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L258-L272"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Prefetcher.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with prefetching to maintain a buffer during iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any dataset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with identical elements. Processing that occurs with the
elements that are produced can be done in parallel (e.g., training on the
GPU) while new elements are generated from the pipeline.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Preloader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Preloader</span></code><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L276-L320"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Preloader" title="Permalink to this definition">¶</a></dt>
<dd><p>Preload elements of the underlying dataset to generate in-memory examples.</p>
<p>This transformer can lead to considerable performance improvements at the cost of
memory consumption.</p>
<p>This is functionally equivalent to <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset.cache</span></code>, except the cached
examples are accessible directly via the <a class="reference internal" href="#sleap.nn.data.dataset_ops.Preloader.examples" title="sleap.nn.data.dataset_ops.Preloader.examples"><code class="xref py py-obj docutils literal notranslate"><span class="pre">examples</span></code></a> attribute.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Preloader.examples">
<code class="sig-name descname"><span class="pre">examples</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Preloader.examples" title="Permalink to this definition">¶</a></dt>
<dd><p>Stored list of preloaded elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Any]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Preloader.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Preloader.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Preloader.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Preloader.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Preloader.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L301-L320"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Preloader.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset that generates preloaded elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> that generates examples as a dictionary of
tensors. Should not be repeating infinitely.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A dataset that generates the same examples.</p>
<p>This is similar to prefetching, except that examples are yielded through a
generator and loaded when this method is called rather than during pipeline
iteration.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Repeater">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Repeater</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epochs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L181-L228"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeating transformer for use in pipelines.</p>
<p>Repeats the underlying elements indefinitely or for a number of “iterations” or
“epochs”.</p>
<p>If placed before batching, this can create mini-batches with examples from across
epoch boundaries.</p>
<p>If placed after batching, this may never reach examples that are dropped as
remainders if not shuffling.</p>
<dl class="simple">
<dt>The ideal pipeline follows the order:</dt><dd><p>shuffle -&gt; batch -&gt; repeat</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Repeater.repeat">
<code class="sig-name descname"><span class="pre">repeat</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater.repeat" title="Permalink to this definition">¶</a></dt>
<dd><p>If False, returns the input dataset unmodified.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Repeater.epochs">
<code class="sig-name descname"><span class="pre">epochs</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater.epochs" title="Permalink to this definition">¶</a></dt>
<dd><p>If -1, repeats the input dataset elements infinitely. Otherwise, loops
through the elements of the input dataset this number of times.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Repeater.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Repeater.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Repeater.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L215-L228"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Repeater.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with repeated loops over the input elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any dataset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same keys, but repeated for
<a class="reference internal" href="#sleap.nn.data.dataset_ops.Repeater.epochs" title="sleap.nn.data.dataset_ops.Repeater.epochs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">epochs</span></code></a> iterations.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Shuffler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Shuffler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reshuffle_each_iteration</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L14-L72"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffling transformer for use in pipelines.</p>
<p>The input to this transformer should not be repeated or batched (though the latter
would technically work). Repeating prevents the shuffling from going through “epoch”
or “iteration” loops in the underlying dataset.</p>
<p>Though batching before shuffling works and respects epoch boundaries, it is not
recommended as it implies that the same examples will always be optimized for
together within a mini-batch. This is not as effective for promoting generalization
as element-wise shuffling which produces new combinations of elements within mini-
batches.</p>
<dl class="simple">
<dt>The ideal pipeline follows the order:</dt><dd><p>shuffle -&gt; batch -&gt; repeat</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Shuffler.shuffle">
<code class="sig-name descname"><span class="pre">shuffle</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.shuffle" title="Permalink to this definition">¶</a></dt>
<dd><p>If False, returns the input dataset unmodified.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Shuffler.buffer_size">
<code class="sig-name descname"><span class="pre">buffer_size</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of examples to keep in a buffer to sample uniformly from. If
set too high, it may take a long time to fill the initial buffer, especially
if it resets every epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.dataset_ops.Shuffler.reshuffle_each_iteration">
<code class="sig-name descname"><span class="pre">reshuffle_each_iteration</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.reshuffle_each_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, resets the sampling buffer every iteration
through the underlying dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Shuffler.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Shuffler.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Shuffler.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L53-L72"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Shuffler.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with shuffled element order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – Any dataset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same keys, but in a
shuffled order, if enabled.</p>
<p>If the input dataset is repeated, this doesn’t really respect epoch
boundaries since it never reaches the end of the iterator.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.dataset_ops.Unbatcher">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.dataset_ops.</span></code><code class="sig-name descname"><span class="pre">Unbatcher</span></code><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L162-L177"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Unbatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Unbatching transformer for use in pipelines.</p>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Unbatcher.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Unbatcher.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Unbatcher.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.dataset_ops.Unbatcher.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.dataset_ops.Unbatcher.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/dataset_ops.py#L175-L177"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.dataset_ops.Unbatcher.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset with unbatched elements.</p>
</dd></dl>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sleap.nn.data.edge_maps.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">sleap.nn.data.edge_maps</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sleap.nn.data.confidence_maps.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">sleap.nn.data.confidence_maps</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2019–2021, Murthy Lab @ Princeton University
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/api/sleap.nn.data.dataset_ops.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>