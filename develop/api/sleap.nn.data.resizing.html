<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="sleap.nn.data.training" href="sleap.nn.data.training.html" /><link rel="prev" title="sleap.nn.data.providers" href="sleap.nn.data.providers.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>sleap.nn.data.resizing - SLEAP (v1.1.3)</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SLEAP (v1.1.3)</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">SLEAP (v1.1.3)</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/tutorial.html">Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/new-project.html">Creating a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-labeling.html">Initial Labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/initial-training.html">Training and Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html">Prediction-assisted labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/assisted-labeling.html#reviewing-and-fixing-predictions">Reviewing and fixing predictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/proofreading.html">Tracking instances across frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/analysis.html">Export Data For Analysis</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/gui.html">GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/cli.html">Command line interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/skeletons.html">Skeleton design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/choosing-models.html">Choosing a set of models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/merging.html">Importing predictions for labeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/proofreading.html">Tracking and proofreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/colab.html">Run training and inference on Colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/custom-training.html">Creating a custom training profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/remote.html">Running SLEAP remotely</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../notebooks/index.html">Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_on_an_example_dataset.html">Training and inference on an example dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Training_and_inference_using_Google_Drive.html">Training and inference on your own data using Google Drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Analysis_examples.html">Analysis examples</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../api.html">Developer API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sleap.instance.html">sleap.instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.message.html">sleap.message</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.skeleton.html">sleap.skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.util.html">sleap.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.asyncvideo.html">sleap.io.asyncvideo</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.convert.html">sleap.io.convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.dataset.html">sleap.io.dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.legacy.html">sleap.io.legacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.pathutils.html">sleap.io.pathutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.video.html">sleap.io.video</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.videowriter.html">sleap.io.videowriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.visuals.html">sleap.io.visuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.adaptor.html">sleap.io.format.adaptor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.coco.html">sleap.io.format.coco</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deeplabcut.html">sleap.io.format.deeplabcut</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.deepposekit.html">sleap.io.format.deepposekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.dispatch.html">sleap.io.format.dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.filehandle.html">sleap.io.format.filehandle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.genericjson.html">sleap.io.format.genericjson</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.hdf5.html">sleap.io.format.hdf5</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.labels_json.html">sleap.io.format.labels_json</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.leap_matlab.html">sleap.io.format.leap_matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.main.html">sleap.io.format.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.sleap_analysis.html">sleap.io.format.sleap_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.io.format.text.html">sleap.io.format.text</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.callbacks.html">sleap.nn.callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.evals.html">sleap.nn.evals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.heads.html">sleap.nn.heads</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.inference.html">sleap.nn.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.losses.html">sleap.nn.losses</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.model.html">sleap.nn.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.monitor.html">sleap.nn.monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.paf_grouping.html">sleap.nn.paf_grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.peak_finding.html">sleap.nn.peak_finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.system.html">sleap.nn.system</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracking.html">sleap.nn.tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.training.html">sleap.nn.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.utils.html">sleap.nn.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.viz.html">sleap.nn.viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.components.html">sleap.nn.tracker.components</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.tracker.kalman.html">sleap.nn.tracker.kalman</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.data.html">sleap.nn.config.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.model.html">sleap.nn.config.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.optimization.html">sleap.nn.config.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.outputs.html">sleap.nn.config.outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.training_job.html">sleap.nn.config.training_job</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.config.utils.html">sleap.nn.config.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.common.html">sleap.nn.architectures.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.encoder_decoder.html">sleap.nn.architectures.encoder_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hourglass.html">sleap.nn.architectures.hourglass</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.hrnet.html">sleap.nn.architectures.hrnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.leap.html">sleap.nn.architectures.leap</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.pretrained_encoders.html">sleap.nn.architectures.pretrained_encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.resnet.html">sleap.nn.architectures.resnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.unet.html">sleap.nn.architectures.unet</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.architectures.upsampling.html">sleap.nn.architectures.upsampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.augmentation.html">sleap.nn.data.augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.confidence_maps.html">sleap.nn.data.confidence_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.dataset_ops.html">sleap.nn.data.dataset_ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.edge_maps.html">sleap.nn.data.edge_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.general.html">sleap.nn.data.general</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.grouping.html">sleap.nn.data.grouping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.inference.html">sleap.nn.data.inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.instance_centroids.html">sleap.nn.data.instance_centroids</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.instance_cropping.html">sleap.nn.data.instance_cropping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.normalization.html">sleap.nn.data.normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.offset_regression.html">sleap.nn.data.offset_regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.pipelines.html">sleap.nn.data.pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.providers.html">sleap.nn.data.providers</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">sleap.nn.data.resizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.training.html">sleap.nn.data.training</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.nn.data.utils.html">sleap.nn.data.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.align.html">sleap.info.align</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.feature_suggestions.html">sleap.info.feature_suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.labels.html">sleap.info.labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.metrics.html">sleap.info.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.summary.html">sleap.info.summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.trackcleaner.html">sleap.info.trackcleaner</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleap.info.write_tracking_h5.html">sleap.info.write_tracking_h5</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap-datasets">Sample datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap">Source code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/murthylab/sleap/releases">Releases</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-sleap.nn.data.resizing">
<span id="sleap-nn-data-resizing"></span><h1>sleap.nn.data.resizing<a class="headerlink" href="#module-sleap.nn.data.resizing" title="Permalink to this headline">¶</a></h1>
<p>Transformers for image resizing and padding.</p>
<dl class="py class">
<dt id="sleap.nn.data.resizing.PointsRescaler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">PointsRescaler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'predicted_instances'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L447-L491"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.PointsRescaler" title="Permalink to this definition">¶</a></dt>
<dd><p>Transformer to apply or invert scaling operations on points.</p>
<dl class="py method">
<dt id="sleap.nn.data.resizing.PointsRescaler.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.PointsRescaler.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.PointsRescaler.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.PointsRescaler.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.PointsRescaler.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_ds</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L464-L491"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.PointsRescaler.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset that contains instance cropped data.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.resizing.Resizer">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">Resizer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'instances'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_to_stride</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_full_image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'full_image'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L107-L251"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.Resizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Data transformer to resize or pad images.</p>
<p>This is useful as a transformation to data streams that require resizing or padding
in order to be downsampled or meet divisibility criteria.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.image_key">
<code class="sig-name descname"><span class="pre">image_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.image_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the images to resize.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.scale_key">
<code class="sig-name descname"><span class="pre">scale_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.scale_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the scale of the images.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.points_key">
<code class="sig-name descname"><span class="pre">points_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.points_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing points to adjust for the resizing
operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.scale">
<code class="sig-name descname"><span class="pre">scale</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scalar float specifying scaling factor to resize images by.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.pad_to_stride">
<code class="sig-name descname"><span class="pre">pad_to_stride</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.pad_to_stride" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum stride in a model that the images must be divisible by.
If &gt; 1, this will pad the bottom and right of the images to ensure they meet
this divisibility criteria. Padding is applied after the scaling specified
in the <a class="reference internal" href="#sleap.nn.data.resizing.Resizer.scale" title="sleap.nn.data.resizing.Resizer.scale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code></a> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.keep_full_image">
<code class="sig-name descname"><span class="pre">keep_full_image</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.keep_full_image" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, keeps the (original size) full image in the examples.
This is useful for multi-scale inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.Resizer.full_image_key">
<code class="sig-name descname"><span class="pre">full_image_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.full_image_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the full images.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.Resizer.from_config">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="sleap.nn.config.data.html#sleap.nn.config.data.PreprocessingConfig" title="sleap.nn.config.data.PreprocessingConfig"><span class="pre">sleap.nn.config.data.PreprocessingConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_to_stride</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_full_image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'full_image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'instances'</span></span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#sleap.nn.data.resizing.Resizer" title="sleap.nn.data.resizing.Resizer"><span class="pre">sleap.nn.data.resizing.Resizer</span></a><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L136-L186"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an instance of this class from its configuration options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – An <code class="xref py py-obj docutils literal notranslate"><span class="pre">PreprocessingConfig</span></code> instance with the desired parameters. If
<code class="xref py py-obj docutils literal notranslate"><span class="pre">config.pad_to_stride</span></code> is not an explicit integer, the <a class="reference internal" href="#sleap.nn.data.resizing.pad_to_stride" title="sleap.nn.data.resizing.pad_to_stride"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad_to_stride</span></code></a>
parameter must be provided.</p></li>
<li><p><strong>image_key</strong> – String name of the key containing the images to resize.</p></li>
<li><p><strong>scale_key</strong> – String name of the key containing the scale of the images.</p></li>
<li><p><strong>pad_to_stride</strong> – An integer specifying the <a class="reference internal" href="#sleap.nn.data.resizing.pad_to_stride" title="sleap.nn.data.resizing.pad_to_stride"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad_to_stride</span></code></a> if
<code class="xref py py-obj docutils literal notranslate"><span class="pre">config.pad_to_stride</span></code> is not an explicit integer (e.g., set to None).</p></li>
<li><p><strong>keep_full_image</strong> – If True, keeps the (original size) full image in the
examples. This is useful for multi-scale inference.</p></li>
<li><p><strong>full_image_key</strong> – String name of the key containing the full images.</p></li>
<li><p><strong>points_key</strong> – String name of the key containing points to adjust for the
resizing operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of this class.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If <code class="xref py py-obj docutils literal notranslate"><span class="pre">config.pad_to_stride</span></code> is not set to an integer and the
    <a class="reference internal" href="#sleap.nn.data.resizing.pad_to_stride" title="sleap.nn.data.resizing.pad_to_stride"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad_to_stride</span></code></a> argument is not provided.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.Resizer.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.Resizer.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.Resizer.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L204-L251"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.Resizer.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataset that contains centroids computed from the inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – A dataset with the image specified in the <a class="reference internal" href="#sleap.nn.data.resizing.Resizer.image_key" title="sleap.nn.data.resizing.Resizer.image_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">image_key</span></code></a> attribute,
points specified in the <a class="reference internal" href="#sleap.nn.data.resizing.Resizer.points_key" title="sleap.nn.data.resizing.Resizer.points_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">points_key</span></code></a> attribute, and the “scale” key for
tracking scaling transformations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same images and points with
resizing applied.</p>
<p>The “scale” key of the example will be multipled by the <a class="reference internal" href="#sleap.nn.data.resizing.Resizer.scale" title="sleap.nn.data.resizing.Resizer.scale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code></a> attribute of
this transformer.</p>
<p>If the <a class="reference internal" href="#sleap.nn.data.resizing.Resizer.keep_full_image" title="sleap.nn.data.resizing.Resizer.keep_full_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keep_full_image</span></code></a> attribute is True, a key specified by
<a class="reference internal" href="#sleap.nn.data.resizing.Resizer.full_image_key" title="sleap.nn.data.resizing.Resizer.full_image_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_image_key</span></code></a> will be added with the to the example containing the image
before any processing.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="sleap.nn.data.resizing.SizeMatcher">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">SizeMatcher</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'instances'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_full_image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'full_image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_image_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_image_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L255-L443"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Data transformer that ensures output images have uniform shape by resizing/padding smaller images.</p>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.image_key">
<code class="sig-name descname"><span class="pre">image_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.image_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the images to resize.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.scale_key">
<code class="sig-name descname"><span class="pre">scale_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.scale_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the scale of the images.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.points_key">
<code class="sig-name descname"><span class="pre">points_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.points_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing points to adjust for the resizing
operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.keep_full_image">
<code class="sig-name descname"><span class="pre">keep_full_image</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.keep_full_image" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, keeps the (original size) full image in the examples.
This is useful for multi-scale inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.full_image_key">
<code class="sig-name descname"><span class="pre">full_image_key</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.full_image_key" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the key containing the full images.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.max_image_height">
<code class="sig-name descname"><span class="pre">max_image_height</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.max_image_height" title="Permalink to this definition">¶</a></dt>
<dd><p>int The target height to which all smaller images will be resized/padded to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="sleap.nn.data.resizing.SizeMatcher.max_image_width">
<code class="sig-name descname"><span class="pre">max_image_width</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.max_image_width" title="Permalink to this definition">¶</a></dt>
<dd><p>int The target width to which all smaller images will be resized/padded to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.SizeMatcher.from_config">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="sleap.nn.config.data.html#sleap.nn.config.data.PreprocessingConfig" title="sleap.nn.config.data.PreprocessingConfig"><span class="pre">sleap.nn.config.data.PreprocessingConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Provider</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_full_image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_image_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'full_image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'instances'</span></span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#sleap.nn.data.resizing.SizeMatcher" title="sleap.nn.data.resizing.SizeMatcher"><span class="pre">SizeMatcher</span></a><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L278-L332"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an instance of this class from configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – An <code class="xref py py-obj docutils literal notranslate"><span class="pre">PreprocessingConfig</span></code> instance with the desired parameters. If
<code class="xref py py-obj docutils literal notranslate"><span class="pre">config.resize_and_pad_to_target</span></code> is <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> and ‘target_height’ /
‘target_width’ are not set, provider needs to be set that implements
‘max_height_and_width’.</p></li>
<li><p><strong>provider</strong> – Data provider.</p></li>
<li><p><strong>update_config</strong> – If True, the input model configuration will be updated with
values inferred from other fields.</p></li>
<li><p><strong>image_key</strong> – String name of the key containing the images to resize.</p></li>
<li><p><strong>scale_key</strong> – String name of the key containing the scale of the images.</p></li>
<li><p><strong>pad_to_stride</strong> – An integer specifying the <a class="reference internal" href="#sleap.nn.data.resizing.pad_to_stride" title="sleap.nn.data.resizing.pad_to_stride"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad_to_stride</span></code></a> if
<code class="xref py py-obj docutils literal notranslate"><span class="pre">config.pad_to_stride</span></code> is not an explicit integer (e.g., set to None).</p></li>
<li><p><strong>keep_full_image</strong> – If True, keeps the (original size) full image in the
examples. This is useful for multi-scale inference.</p></li>
<li><p><strong>full_image_key</strong> – String name of the key containing the full images.</p></li>
<li><p><strong>points_key</strong> – String name of the key containing points to adjust for the
resizing operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of this class.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.SizeMatcher.input_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.input_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that incoming elements are expected to have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.SizeMatcher.output_keys">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_keys</span></code><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.output_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys that outgoing elements will have.</p>
</dd></dl>
<dl class="py method">
<dt id="sleap.nn.data.resizing.SizeMatcher.transform_dataset">
<code class="sig-name descname"><span class="pre">transform_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.data.ops.dataset_ops.DatasetV2</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L350-L443"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.SizeMatcher.transform_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform a dataset with variable size images into one with fixed sizes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ds_input</strong> – A dataset with the image specified in the <a class="reference internal" href="#sleap.nn.data.resizing.SizeMatcher.image_key" title="sleap.nn.data.resizing.SizeMatcher.image_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">image_key</span></code></a> attribute,
points specified in the <a class="reference internal" href="#sleap.nn.data.resizing.SizeMatcher.points_key" title="sleap.nn.data.resizing.SizeMatcher.points_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">points_key</span></code></a> attribute, and the “scale” key for
tracking scaling transformations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.data.Dataset</span></code> with elements containing the same images and points of
equal size.</p>
<p>If the <a class="reference internal" href="#sleap.nn.data.resizing.SizeMatcher.keep_full_image" title="sleap.nn.data.resizing.SizeMatcher.keep_full_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keep_full_image</span></code></a> attribute is True, a key specified by
<a class="reference internal" href="#sleap.nn.data.resizing.SizeMatcher.full_image_key" title="sleap.nn.data.resizing.SizeMatcher.full_image_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_image_key</span></code></a> will be added to the example containing the image before
any processing.</p>
</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.resizing.find_padding_for_stride">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">find_padding_for_stride</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_stride</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L10-L30"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.find_padding_for_stride" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute padding required to ensure image is divisible by a stride.</p>
<p>This function is useful for determining how to pad images such that they will not
have issues with divisibility after repeated pooling steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_height</strong> – Scalar integer specifying the image height (rows).</p></li>
<li><p><strong>image_width</strong> – Scalar integer specifying the image height (columns).</p></li>
<li><p><strong>max_stride</strong> – Scalar integer specifying the maximum stride that the image must be
divisible by.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of (pad_bottom, pad_right), integers with the number of pixels that the
image would need to be padded by to meet the divisibility requirement.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.resizing.pad_to_stride">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">pad_to_stride</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_stride</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L33-L66"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.pad_to_stride" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad an image to meet a max stride constraint.</p>
<p>This is useful for ensuring there is no size mismatch between an image and the
output tensors after multiple downsampling and upsampling steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – Single image tensor of shape (height, width, channels).</p></li>
<li><p><strong>max_stride</strong> – Scalar integer specifying the maximum stride that the image must be
divisible by. This is the ratio between the length of the image and the
length of the smallest tensor it is converted to. This is typically
<code class="xref py py-obj docutils literal notranslate"><span class="pre">2</span> <span class="pre">**</span> <span class="pre">n_down_blocks</span></code>, where <code class="xref py py-obj docutils literal notranslate"><span class="pre">n_down_blocks</span></code> is the number of 2-strided
reduction layers in the model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input image with 0-padding applied to the bottom and/or right such that the
new shape’s height and width are both divisible by <code class="xref py py-obj docutils literal notranslate"><span class="pre">max_stride</span></code>.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="sleap.nn.data.resizing.resize_image">
<code class="sig-prename descclassname"><span class="pre">sleap.nn.data.resizing.</span></code><code class="sig-name descname"><span class="pre">resize_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> → <span class="pre">tensorflow.python.framework.ops.Tensor</span><a class="reference external" href="https://github.com/murthylab/sleap/blob/v1.1.3/sleap/nn/data/resizing.py#L69-L103"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sleap.nn.data.resizing.resize_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescale an image by a scale factor.</p>
<p>This function is primarily a convenience wrapper for <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.image.resize</span></code> that
calculates the new shape from the scale factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – Single image tensor of shape (height, width, channels).</p></li>
<li><p><strong>scale</strong> – Factor to resize the image dimensions by, specified as either a float
scalar or as a 2-tuple of [scale_x, scale_y]. If a scalar is provided, both
dimensions are resized by the same factor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The resized image tensor of the same dtype but scaled height and width.</p>
</dd>
</dl>
<p>See also: tf.image.resize</p>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sleap.nn.data.training.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">sleap.nn.data.training</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sleap.nn.data.providers.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">sleap.nn.data.providers</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2019–2021, Murthy Lab @ Princeton University
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/api/sleap.nn.data.resizing.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>